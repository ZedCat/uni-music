(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-play-index"],{"1b2c":function(t,e,n){"use strict";var i=n("ca49"),a=n.n(i);a.a},"1de5":function(t,e,n){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},7699:function(t,e,n){"use strict";n.r(e);var i=n("f8d1"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"8f95":function(t,e,n){t.exports=n.p+"static/img/musicImg.a43c9d11.png"},c887:function(t,e,n){"use strict";n.r(e);var i=n("ef7c"),a=n("7699");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("1b2c");var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"0216ca62",null,!1,i["a"],o);e["default"]=c.exports},ca49:function(t,e,n){var i=n("e3b1");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("de05a16a",i,!0,{sourceMap:!1,shadowMode:!1})},e3b1:function(t,e,n){var i=n("24fb"),a=n("1de5"),r=n("8f95");e=i(!1);var o=a(r);e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.play-container[data-v-0216ca62]{position:relative;width:100%;height:100%}.play-container .author[data-v-0216ca62]{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);color:hsla(0,0%,100%,.9);font-size:%?28?%}.play-container .mask-container[data-v-0216ca62]{overflow:hidden;position:absolute;left:0;top:0;right:0;bottom:0;z-index:0;background-size:cover;background-position:50%}.play-container .mask-container[data-v-0216ca62]:after{content:"";position:absolute;width:130%;height:130%;left:0;top:0;z-index:1;-webkit-filter:blur(15px);filter:blur(15px);-webkit-transform:translate(-3rem,-3rem);transform:translate(-3rem,-3rem);background:inherit;background-size:100% 100%}.play-container .mask-container .cover-mask[data-v-0216ca62]{position:absolute;top:0;bottom:0;left:0;z-index:3;width:100%;height:100%;background-color:rgba(0,0,0,.8)}.play-container .img-container[data-v-0216ca62]{position:absolute;top:35%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:%?450?%;height:%?450?%;background:url('+o+") no-repeat;background-size:100% 100%;-webkit-border-radius:50%;border-radius:50%;border:2px solid hsla(0,0%,100%,.3);-webkit-transition:all 1s linear;transition:all 1s linear}.play-container .img-container .authorImg[data-v-0216ca62]{-webkit-border-radius:50%;border-radius:50%;width:%?315?%;height:%?315?%;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.play-container .lighIcon[data-v-0216ca62]{color:#f84e51!important}.play-container .lyric-container[data-v-0216ca62]{position:absolute;bottom:calc(10% + 100px)}.play-container .lyric-container .lyric-item[data-v-0216ca62]{color:#e1d7f0;height:40px;line-height:40px}.play-container .lyric-container .lyric-item.active[data-v-0216ca62]{color:#f84e51}.play-container .lyric-container .noLyric[data-v-0216ca62]{position:absolute;top:50%;left:50%;color:#fff;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.play-container .bottom-control[data-v-0216ca62]{position:absolute;bottom:10%;left:10px;right:10px}.play-container .bottom-control .progress[data-v-0216ca62]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.play-container .bottom-control .progress .audio-number[data-v-0216ca62]{width:%?120?%;font-size:%?24?%;line-height:1;color:#fff;text-align:center}.play-container .bottom-control .progress .audio-slider[data-v-0216ca62]{-webkit-box-flex:1;-webkit-flex:1;flex:1;margin:0}.play-container .bottom-control .iconList[data-v-0216ca62]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:%?26?%}.play-container .bottom-control .iconList .iconfont[data-v-0216ca62]{color:#fff;font-size:%?48?%}",""]),t.exports=e},ef7c:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"play-container"},[n("div",{staticClass:"mask-container",style:{"background-image":"url("+t.playInfo.coverImgUrl+")"}},[n("div",{staticClass:"cover-mask",staticStyle:{opacity:"0.6"}})]),n("cu-custom",{staticStyle:{color:"#fff"},attrs:{isBack:!0}},[n("template",{staticClass:"musicName",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.playInfo.title))])],2),n("v-uni-view",{staticClass:"author",style:{top:t.CustomBar+"px"}},[t._v(t._s(t.playInfo.singer))]),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.lyricShow,expression:"!lyricShow"}],staticClass:"img-container",style:{transform:"translate(-50%, -50%) rotate("+t.rotate+"deg)"}},[n("v-uni-image",{staticClass:"authorImg",attrs:{src:t.playInfo.coverImgUrl},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getLyric.apply(void 0,arguments)}}})],1),t.lyricShow?n("v-uni-scroll-view",{staticClass:"lyric-container",style:{top:t.CustomBar+35+"px"},attrs:{"scroll-y":!0,"scroll-top":t.scrollTop},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.lyricShow=!1}}},[t.lyricList.length>0?n("v-uni-view",t._l(t.lyricList,(function(e,i){return n("v-uni-view",{key:i,staticClass:"lyric-item",class:{active:i==t.currentLyricIndex},staticStyle:{"text-align":"center"}},[t._v(t._s(e.content))])})),1):n("p",{staticClass:"noLyric"},[t._v("暂无歌词")])],1):t._e(),n("v-uni-view",{staticClass:"bottom-control"},[n("v-uni-view",{staticClass:"progress"},[n("v-uni-view",{staticClass:"audio-number"},[t._v(t._s(t.playDetailInfo.current))]),n("v-uni-slider",{staticClass:"audio-slider",attrs:{activeColor:"rgb(248, 78, 81)","block-size":"8",value:t.playDetailInfo.current_value,max:t.playDetailInfo.duration_value},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.handleChange.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"audio-number"},[t._v(t._s(t.playDetailInfo.duration))])],1),n("v-uni-view",{staticClass:"iconList flex"},[n("v-uni-text",{staticClass:"iconfont",class:t.likeList.includes(t.playInfo.id)?"icon-like lighIcon":"icon-unlike",staticStyle:{"margin-right":"65rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.likeMusic()}}}),n("v-uni-text",{staticClass:"iconfont icon-play-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleChangePlay(-1)}}}),n("v-uni-text",{staticClass:"iconfont",class:t.paused?"icon-pause":"icon-play",staticStyle:{"font-size":"90rpx",margin:"0 35px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.playMusic.apply(void 0,arguments)}}}),n("v-uni-text",{staticClass:"iconfont icon-play-right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleChangePlay(1)}}}),n("v-uni-text",{staticClass:"iconfont icon-liebiao",staticStyle:{"margin-left":"65rpx","font-size":"56rpx"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.modelShow=!0}}})],1)],1),n("play-list",{on:{backHome:function(e){arguments[0]=e=t.$handleEvent(e),t.backHome.apply(void 0,arguments)}},model:{value:t.modelShow,callback:function(e){t.modelShow=e},expression:"modelShow"}})],1)},r=[]},f8d1:function(t,e,n){"use strict";var i=n("4ea4");n("c740"),n("4160"),n("caad"),n("e25e"),n("ac1f"),n("2532"),n("466d"),n("1276"),n("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var a=i(n("1da1")),r=i(n("5530")),o=i(n("9cc3")),s=n("2f62"),c={data:function(){return{modelShow:!1,scrollTop:0,currentLyricIndex:0,lyricList:[],rotate:0,likeList:[],lyricShow:!1,timer:null,playDetailInfo:{current:"00:00",duration:"00:00",current_value:0,duration_value:0}}},components:{playList:o.default},computed:(0,r.default)({},(0,s.mapState)({playInfo:function(t){return t.playInfo},paused:function(t){return t.paused},userInfo:function(t){return t.userInfo}})),onShow:function(){var t=this;this.paused?clearInterval(this.timer):this.initRotate(),this.getLikeData(),this.playDetailInfo=this.$audio.playinfo,this.initLyric(),this.$audio.syncStateOn("page-index-get-state",(function(e){var n=e.playinfo;t.playDetailInfo=(0,r.default)({},n),t.initLyric()}))},methods:{initLyric:function(){var t=this;if(0!=this.lyricList.length){var e=this.playDetailInfo.current;this.currentLyricIndex=this.lyricList.findIndex((function(n,i){return!(n.time<e&&t.lyricList[i+1])||t.lyricList[i+1].time>e})),this.scrollTop=36*this.currentLyricIndex}},getLikeData:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var n,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.userInfo.id,i=(new Date).getTime(),e.next=4,t.$api.likeData({uid:n,timestamp:i});case 4:a=e.sent,t.$nextTick((function(){t.likeList=a.ids||[]}));case 6:case"end":return e.stop()}}),e)})))()},likeMusic:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.likeList.includes(t.playInfo.id),i=(new Date).getTime(),e.next=4,t.$api.likeMusic({id:t.playInfo.id,timestamp:i,like:!n});case 4:e.sent,t.getLikeData();case 6:case"end":return e.stop()}}),e)})))()},handleChange:function(t){this.$audio.seek(t.target.value)},playMusic:function(){var t=this;this.paused?this.initRotate():clearInterval(this.timer);var e=this.$audio.audiolist,n=e.findIndex((function(e){return e.id==t.playInfo.id}));this.$audio.operate(n),this.$store.commit("SET_PASUED",!this.paused)},initRotate:function(){var t=this;this.timer=setInterval((function(){t.rotate+=9}),1e3)},getLyric:function(t){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var n,i,a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.lyricShow=!0,n=[],i=e.playInfo.id,t.next=5,e.$api.getLyric({id:i});case 5:a=t.sent,n=(a.lrc.lyric||"").split("\n"),r=/^\[.*\]/,o=[],n.forEach((function(t){if(t.match(r)){var e=t.match(r)[0].substr(1,8),n=e.substr(0,2),i=e.substr(3,2),a=e.substr(6,2);o.push({time:e,ms:60*parseInt(n)*1e3+1e3*parseInt(i)+10*parseInt(a),content:t.substr(11)})}})),e.lyricList=o;case 11:case"end":return t.stop()}}),t)})))()},handleChangePlay:function(t){this.$store.dispatch("changePlay",t)},backHome:function(){uni.switchTab({url:"/pages/index/index"})}},onHide:function(){this.$audio.syncStateOff("page-index-get-state")},watch:{playInfo:{handler:function(){this.scrollTop=0,this.getLyric(!0)},deep:!0}}};e.default=c}}]);